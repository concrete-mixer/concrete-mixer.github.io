<!DOCTYPE html>
<html class="no-js">
  <head>
	<meta charset="utf-8">
	<title>
        
            What's new
        
    </title>
	<meta name="description" content="I last updated this blog in December 2015. In 2016 my time was rather swamped by work and fatherhood, but I tinkered away now and then and undertook some maj...">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- CSS -->
	<link rel="stylesheet" href="/css/main.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

	<!-- Canonical -->
	<link rel="canonical" href="https://concrete-mixer.github.io/2017/02/whats-new">

	<!-- RSS -->
	<link rel="alternate" type="application/atom+xml" title="Concrète Mixer - shredded field recording ambience" href="https://concrete-mixer.github.io/feed.xml" />

	<!-- Font Awesome -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google Fonts -->
	
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">
	

	<!-- KaTeX -->
	
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.js"></script>
	

	<!-- Google Analytics -->
	
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-70881154-1', 'auto');
	ga('send', 'pageview');
	</script>
	

  <script src="https://cdn.jsdelivr.net/sockjs/1/sockjs.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://connect.soundcloud.com/sdk/sdk-3.1.2.js"></script>
  <script>
    // heyho, it's jquery
    $(document).ready(function() {
      // do it like this for now
      contributor_sites = {
        'Rob Szeliga': 'http://www.rszoniq.com',
        'Sebastian Brock': 'http://bemtevi.de/',
        'Adrien Capozzi': 'http://www.adrien75.com/adrien75.html'
      }

      // initialise soundcloud client
      SC.initialize({
        client_id: '11bab725274cff587d5908c18cd501c2'
      });

      // kick off sockJS connection
      var sock = new SockJS('http://concrete-mixer.venturus.io/cm-data');
      sock.onopen = function() {
        console.log('WS connection open');
      };

      sock.onmessage = function(e) {
        var data = JSON.parse(e.data)
        var id = '#stream' + data.stream
        var $el = $(id)

        if ( $el ) {
          $('.call-out').addClass('now-playing')

          $('#nowPlaying').fadeIn(500, function() {
            $el.fadeOut(500, function() {
              var contributorName = data.recordist

              if ( contributor_sites[data.recordist] !== undefined ) {
                contributorName = '<a href="'
                  + contributor_sites[data.recordist]
                  + '">' + data.recordist + '</a>'
              }

              if ( data.soundcloudTrackId ) {
                SC.get('/tracks/' + data.soundcloudTrackId)
                  .then(function(track) {
                    $el.html(
                      contributorName
                      + ': <a href="' + track.permalink_url
                      + '" target="_blank">' + data.file + '</a>'
                    )

                    $el.fadeIn(500)
                  });
              }
              else {
                $el.html(contributorName + ': ' + data.file);
                $el.fadeIn(500)
              }
            })
          })
        }
      };

      sock.onclose = function() {
        console.log('WS connection closed');
      };
    });
  </script>
</head>

  <body>
    <header class="site-header">
	<div class="branding">
		
		<a href="/">
			<img class="avatar" src="/img/highgate.jpg" alt=""/>
		</a>
		
		<h1 class="site-title">
			<a href="/">Concrète Mixer - shredded field recording ambience</a>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
			
			
			
			
			<li>
				<a class="page-link" href="/contributors">
					Concrète Mixer radio contributors
				</a>
			</li>
			
			
			
			
			
			
			
			
			
			
			
			
			<!-- Social icons from Font Awesome, if enabled -->
			
<li>
	<a href="https://concrete-mixer.github.io/feed.xml" title="Follow RSS feed">
		<i class="fa fa-fw fa-rss"></i>
	</a>
</li>



<li>
	<a href="mailto:concretemixer.audio@gmail.com" title="Email">
		<i class="fa fa-fw fa-envelope"></i>
	</a>
</li>













<li>
	<a href="https://github.com/concrete-mixer" title="Follow on GitHub">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>













<li>
	<a href="https://soundcloud.com/concrete-mixer" title="Follow on SoundCloud">
		<i class="fa fa-fw fa-soundcloud"></i>
	</a>
</li>









<li>
	<a href="https://twitter.com/soundsconcrete" title="Follow on Twitter">
		<i class="fa fa-fw fa-twitter"></i>
	</a>
</li>






		</ul>
	</nav>
</header>

    <div class="content">
      <article class="feature-image">
  <header style="background-image: url('/img/concrete-feature.jpg')">
    <h1 class="title">What's new</h1>
    <p class="meta">
    February 7, 2017
    
    </p>
  </header>
  <section class="post-content"><p>I last updated this blog in December 2015. In 2016 my time was rather swamped by work and fatherhood, but I tinkered away now and then and undertook some major work toward the end of last year. The result of this is Concrète Mixer 2.0, and this post outlines what’s changed.</p>

<h1 id="the-audio-is-much-the-same">The audio is much the same</h1>

<p>Firstly, the least impressive bit: the audio rendering is much the same as before. Some new processing has been added to playSound, and some tweaks to playFx have been made here and there, but there’s not too much different. I have other ideas but most of the effort has been aimed at refactoring the app to make it more stable and (frankly) sane.</p>

<h1 id="no-more-perl">No more Perl</h1>

<p>The biggest change to the codebase is that there’s no Perl wrapper for the app. Instead, the functionality formerly implemented in Perl has been rewritten in ChucK.</p>

<p>This change was facilitated by my discovery that ChucK has FileIO and regular expression libraries which I can read and parse the config file. I’m a bit rueful I didn’t discover these libs earlier, although to be fair neither of them is documented on the ChucK website.</p>

<h1 id="hello-python---soundcloud-support">Hello Python - Soundcloud support</h1>

<p>Even as I dispensed with Perl, I had an idea to add SoundCloud support, and decided use the Python Soundcloud library.</p>

<p>For a while I’d thought that Soundcloud support for users might be handy.</p>

<h2 id="how-it-works">How it works</h2>

<ul>
  <li>Make a playlist in Soundcloud, making all the files downloadable</li>
  <li>Put the playlist URL(s) into the concrete.conf file.</li>
  <li>Concrete Mixer will progressively download the files from the playlist and play them when needed.</li>
</ul>

<p>There’s support for most sound codecs via the lib-avconc library (aka ffmpeg). Soundcloud support makes evaluation of the app easier, and the default <code class="highlighter-rouge">concrete.conf.sample</code> points to some demo playlists.</p>

<h1 id="concrte-mixer-in-docker">Concrète Mixer in Docker</h1>

<p>I’ve decided to remove the compiled binary and selected chugins from the CM distribution - it wasn’t really appropriate to sling binaries in a github repo, and it’s certainly easier to get users to compile ChucK themselves. However this means that a prospective user now needs to:</p>

<ul>
  <li>compile ChucK</li>
  <li>compile chugins</li>
  <li>install the supporting Python libs for Soundcloud support</li>
</ul>

<p>…which is a bit messy. As a response to this, I’ve built a <a href="https://github.com/concrete-mixer/cm-docker-rpi-dac">Docker image</a> which installs all these prerequisites and kicks off CM execution. This image is built with Raspbian to run on a Raspberry Pi.</p>

<h1 id="concrte-mixer-as-an-internet-radio-station">Concrète Mixer as an internet radio station</h1>

<p>Finally, I’ve made <a href="https://github.com/concrete-mixer/cm-docker-rpi-internet">another Docker image</a> which augments Concrète Mixer with <a href="http://www.darkice.org">Darkice</a> and <a href="https://www.icecast.org">Icecast</a> to create a Concrète Mixer radio station. Despite the extra processing required, this setup runs pretty well on a Pi3. You can hear the result <a href="http://concrete-mixer.venturus.io/concrete-mixer.mp3">here</a>.</p>

<h1 id="things-to-come">Things to come</h1>

<p>The development of 2.0 has tidied up a lot of ugliness in the original build and suggest a way forward for the future.</p>

<h2 id="near-term---radio-concrte">Near term - Radio Concrète</h2>

<p>I’ve always had a question mark in my head over how punters would use Concrète Mixer, who they would be and why they would want to use it. As an occasional sound recordist who likes mashing up audio, the use case seems obvious to me, and I guess there are others who might be keen, but whether they’d want little boxes to do it or not is still unknown to me.</p>

<p>Instead, Concrète Mixer as an internet radio station seems like a good focus to the project. The way forward seems to me to be to get more sounds, and refine the effects/playback system.</p>

<h2 id="longer-term">Longer term</h2>

<p>There’s still a lot that could be done on the audio front:</p>

<ul>
  <li>The effects chain is still mono (hidden with a bit of delay on a randomly selected channel</li>
  <li>I have some more sound mashing ideas on playback that I haven’t explored yet. Some of these ideas (eg stereo reverb) will have to wait until more powerful Raspberry Pis are available.</li>
</ul>
</section>
</article>

<!-- Post navigation -->


<!-- Disqus -->

<div class="comments">
  <div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_shortname = 'concretemixer';
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</div>


    </div>
    
<script src="/js/katex_init.js"></script>



<footer class="site-footer">
	<p class="text">Powered by <a href="http://jekyllrb.com">Jekyll</a> with <a href="https://rohanchandra.github.io/project/type/">Type Theme</a>
</p>
</footer>


  </body>
</html>
