<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  

  <title>How I got to using ChucK</title>
  <meta name="description" content="This is a brief outline of how I went from using ‘standard’ music making software and ended up coding in ChucK.

">
  <meta name="author" content="Concrète Mixer">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="How I got to using ChucK">
  <meta name="twitter:description" content="This is a brief outline of how I went from using ‘standard’ music making software and ended up coding in ChucK.

">
  
  <meta name="twitter:creator" content="soundsconcrete">
  
  <meta name="twitter:image" content="//images/favicons/favicon-194x194.png" />

  <meta property="og:type" content="article">
  <meta property="og:title" content="How I got to using ChucK">
  <meta property="og:description" content="This is a brief outline of how I went from using ‘standard’ music making software and ended up coding in ChucK.

">
  <meta property="og:image" content="//images/favicons/favicon-194x194.png" />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="/css/main.css?1497782518209214020">
  <link rel="canonical" href="https://concrete-mixer.github.io//2015/12/chuck/">
  <link rel="alternate" type="application/rss+xml" title="Concrète Mixer" href="/feed.xml">

    <script src="https://cdn.jsdelivr.net/sockjs/1/sockjs.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://connect.soundcloud.com/sdk/sdk-3.1.2.js"></script>
  <script src="/js/concrete-mixer.js"></script>

</head>


  <body>
    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>

<header class="panel-cover" style="background-image: url(/images/cover.jpg)">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <a href="/" title="link to home of Concrète Mixer">
          <img src="/images/profile.jpg" class="user-image" alt="My Profile Photo">
          <h1 class="panel-cover__title panel-title">Concrète Mixer</h1>
        </a>
        <hr class="panel-cover__divider">
        <p class="panel-cover__description">An internet radio station dedicated to shredded field recording ambience</p>

        <div id="cmPlayer">
          <hr class="panel-cover__divider">
          <audio
            src="http://concrete-mixer.venturus.io/concrete-mixer.mp3"
            volume="0.5"
            controls
          >
          </audio>
        </div>

        <div id="nowPlaying">
          <p id="nowPlayingLabel">Now playing</p>
          <p id="stream1" style="display:none"></p>
          <p id="stream2" style="display:none"></p>
        </div>

        <hr class="panel-cover__divider panel-cover__divider--secondary">

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a id="blog-link" href="/#blog" title="link to Concrète Mixer blog" class="blog-button">Blog</a></li>
              <li class="navigation__item"><a href="/contributors.html" title="link to Concrète Mixer contributors" class="blog-button">Contributors</a></li>
              <li class="navigation__item"><a href="/2017/02/call-for-field-recordings/" title="link to Concrète Mixer contributors" class="blog-button">Donate sounds</a></li>
            </ul>
          </nav>
          <br />

          <nav class="cover-navigation navigation--social">
            <ul class="navigation">
          
            
              <!-- Twitter -->
              <li class="navigation__item">
                <a href="http://twitter.com/soundsconcrete" title="@soundsconcrete on Twitter" target="_blank">
                  <i class="icon icon-social-twitter"></i>
                  <span class="label">Twitter</span>
                </a>
              </li>
            

            

            

            
              <!-- GitHub -->
              <li class="navigation__item">
                <a href="https://www.github.com/concrete-mixer" title="concrete-mixer on GitHub" target="_blank">
                  <i class="icon icon-social-github"></i>
                  <span class="label">GitHub</span>
                </a>
              </li>
            

            
              <!-- Email -->
              <li class="navigation__item">
                <a href="mailto:concretemixer.audio@gmail.com" title="Email concretemixer.audio@gmail.com" target="_blank">
                  <i class="icon icon-mail"></i>
                  <span class="label">Email</span>
                </a>
              </li>
            

            <!-- RSS -->
            <li class="navigation__item">
              <a href="/feed.xml" title="Subscribe" target="_blank">
                <i class="icon icon-rss"></i>
                <span class="label">RSS</span>
              </a>
            </li>
          
            </ul>
          </nav>

        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>


    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <article class="post-container post-container--single">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="1 Dec 2015" class="post-meta__date date">1 Dec 2015</time>
      
    </div>
    <h1 class="post-title">How I got to using ChucK</h1>
  </header>

  <section class="post">
    <p>This is a brief outline of how I went from using ‘standard’ music making software and ended up coding in ChucK.</p>

<p>When I started looking at doing audio software development I looked at several options. The way I write it sounds like I went about this task in a very precise way, but in reality I drifted in and out of things, with some dabbling occurring after I had already settled on ChucK.</p>

<p>The intent of this post is to outline the “journey” I took in case it might be useful for others. The big caveat is that there’s nothing particularly definitive about the choices I’ve made or where I’ve ended up, so you’d be better in taking what’s written below as a starting point for your own evaluations rather than ignoring the options I passed on and going straight to ChucK.</p>

<h1 id="background">Background</h1>

<p>So until 2013 I’d spent the previous 11 years producing electronic music tracks of various kinds using <a href="http://www.audiomulch.com">AudioMulch</a>, a nifty if decidedly lowkey (compared to Live/Reason/Logic/Yaddayadda) program for Windows and (eventually) Mac. While I enjoyed using Mulch, its development ground to a halt in the early part of this decade and the project is now moribund. (In my view, an open sourced Mulch would be a killer app for Linux audio, but I don’t think that will happen.)</p>

<p>After a decade of Mulching I was keen to try something different. I dined with the devil and tried <a href="https://www.ableton.com/en/live/">Ableton Live</a>, but I’ve never been keen on following the herd (however excellent their choice might be). I decided that if I was to make a change it should be radical, and I should try to make my own sound from as low a level as possible.</p>

<h1 id="priorities">Priorities</h1>

<ul>
  <li>Being increasingly time poor, I didn’t want to have to an entire sound app myself (except, briefly, when I had a dabble).</li>
  <li>It had to be Linuxy, preferably free/open source</li>
  <li>It had to be able to run on a Raspberry Pi, because I wanted to make a sound generating box.</li>
</ul>

<h1 id="the-evaluation">The Evaluation</h1>

<h2 id="pure-data">Pure Data</h2>

<p><a href="https://puredata.info/">Pure Data</a> is the open source implementation of <a href="https://en.wikipedia.org/wiki/Max_%28software%29">Max/MSP</a> (Max on a Mac seems to be the defacto standard for the academic end of audio programming). I didn’t really do much pd coding, but I did watch the bulk of the videos of one of <a href="https://en.wikipedia.org/wiki/Miller_Puckette">Miller “MSP” Puckette</a>’s <a href="http://pd-la.info/pd-media/miller-puckette-mus171-videos/">introductory courses on pd</a>, which I greatly enjoyed and highly recommend.</p>

<p>In the end I decided pd wasn’t for me. I was a bit reluctant about this, as pd is pretty cool, but coming from a web programming background I find pd’s visual programming paradigm a bit unintuitive, or at least more time-consuming to fathom. Also I’d become increasingly annoyed mousing about to make music.</p>

<h2 id="supercollider">Supercollider</h2>

<p>I had a brief look at <a href="http://supercollider.github.io/">SuperCollider</a> but found the code layout (everything is wrapped up in braces) a bit frustrating. Again, it’s something I could come back to if I had sufficient motivation. Also, cool name…</p>

<h2 id="web-audio-api">Web Audio API</h2>

<p>The <a href="https://en.wikipedia.org/wiki/HTML5_Audio#Web_Audio_API_and_MediaStream_Processing_API">web audio API</a> is a standard for rendering audio in web browsers. When I looked at it in 2013 it was reasonably raw and only properly supported by Chrome. The API is interfaced with javascript, and as someone who has worked in JS for some time that did appeal.</p>

<h3 id="a-digression-about-mobile-apps-and-sound-art">A digression about mobile apps and sound art</h3>
<p>Several demo apps written using the API are available online, and they are impressive. If Android’s browser container supported it, there’s a good chance I might have written Concrete Mixer as a phone app.</p>

<p>Two years on, however, I’m now of the view that building CM as a mobile app would have been a mistake. I don’t like the idea of a sound producing app being one a hundred apps on a user’s phone competing for their attention. 
To my mind the task of rendering sound worlds is a serious business, and Raspberry Pis, even though they are inexpensive and to some extent disposable, still feel more appropriate for this endeavour. More <em>honest</em>, somehow.</p>

<h2 id="back-to-the-web-audio-api">Back to the Web Audio API</h2>

<p>So yes, back on topic, my main feeling is that the web audio API is best used as intended for interactive multimedia, rather than an audio-only application. I also find the API itself a bit cumbersome (compared to ChucK, see below). I would pay more attention if there was an implementation of it in nodejs but as far as I’m aware there’s nothing available <a href="https://github.com/sebpiq/node-web-audio-api">that isn’t alpha</a>.</p>

<p>Again, there may be reasons in the future to use it, but not right now.</p>

<h2 id="perl">Perl</h2>

<p>Mid last year after I went on a tangent learning some audio processing techniques without ChucK doing the heavy lifting. I did this in Perl because it’s what I use in my day job and I wanted to save time. I ended up having a good fiddle and may write up a report on my experiments later. However I soon concluded that Perl isn’t the best platform for doing this long term.</p>

<h2 id="chuck">ChucK</h2>

<p>In the end I went with ChucK because it’s the simplest, most intuitive (for me anyway) language I came across. (This doesn’t mean it’s the best.)</p>

<p>So <a href="http://chuck.cs.princeton.edu/">ChucK</a> is a C++ish OO scripting language which describes itself as “strongly typed and strongly timed”. Time is tamed with the use of the <code class="highlighter-rouge">dur</code> (duration) type as well as being able to delay execution in a very ‘timely’ (teehee!) context:</p>

<figure class="highlight"><pre><code class="language-chuck" data-lang="chuck"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre>441::samp =&gt; dur interval; // 441 samples or 1/100 of a second

while ( 1 ) { // ie do this continually
    interval =&gt; now; // wait for this duration to pass
    &lt;&lt;&lt; "I waited", interval, "samples and then I did something" &gt;&gt;&gt;; // log to stdout

    // will print the above message 100 times a second
    // you would never want to do this
}<span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>It should be reasonably clear that this is perfect for scheduling and sequencing changes in signal - be it pitch, timbre, silence, etc.</p>

<p>ChucK’s other eccentricity is the <code class="highlighter-rouge">=&gt;</code> ‘ChucK’ assignment operator, which both assigns variables (back to front) as well as links audio components in the same way you might plug a guitar into an amp and from an amp into a mixer:</p>

<figure class="highlight"><pre><code class="language-chuck" data-lang="chuck"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></td><td class="code"><pre>// this listing demonstrates various uses of the =&gt; operator

// declare signal generating/filtering elements
// in ChucK parlance these are generically called Ugens.
// instantiate a sawtooth oscillator called saw
// and a low pass filter called low pass
SawOsc saw, LPF lowpass;

// set the gain of the sawtooth osc to a quarter of maximum
// it is strongly advisable to do this
// note scale is logarithmic so this is actually -12ish decibels
0.25 =&gt; saw.gain;

440 =&gt; saw.freq; // initialise the oscillator frequency to A4
// note saw.freq(440) does the same thing
4000 =&gt; int inty; // variable assignment

// set the lowpass filter to 4Khz (frequency response will roll
// off above this value with a steepness according to the filter
// type
inty =&gt; saw.freq;

// route saw oscillator to lowpass and then on to the soundcard output
// and route that to the sound card (dac)
saw =&gt; lowpass =&gt; dac;

// note you can declare and chuck at the same time, so we could have gone:
// SawOsc saw =&gt; LPF lowpass =&gt; dac;

while ( 1 ) { // loop forever
    // Get some sample hold going

    // randomly assign the oscillator frequency
    Std.rand2f( 20, 4000 ) =&gt; saw.freq;

    // randomly assign the filter frequency
    Std.rand2f( 20, 4000 ) =&gt; lowpass.freq;

    // finally, move time on
    // you can define duration in both increments of time and samples
    0.5::second =&gt; now; 
    
}<span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>ChucKing durations to <code class="highlighter-rouge">now</code> means advancing time. Once you have your components in place they will do their thing (ie oscillate or filter) without you having to worry about them doing it.</p>

<p>When I studied ChucK all this made intuitive sense to me. Consequently I’ve ended up using ChucK for most of my recent tinkering.</p>

<h2 id="downsides">Downsides</h2>

<p>ChucK is 10 years old, and you’d expect a language of that age to be mature. However ChucK’s developer and userbase is small, and academic, and ChucK thus has few pressures on it. Development has focused on a narrow range of applications, notably “live programming”. I don’t dispute the suitability of this narrow focus, but it also means that ChucK often feels like a ‘toy language’, missing many features you’d expect. I guess I had better give examples:</p>

<ul>
  <li>Barebones syntax, eg no <code class="highlighter-rouge">case</code> statements or much in the way of syntactic sugar.</li>
  <li>No base library loading - you need to explicitly load every library file you want access to. You can’t just provide ChucK with a lib directory environment variable and have all libraries in that directory loaded automatically.</li>
  <li>A lack of file system tools (for example, there is no way in ChucK to access the file system, other than to load ChucK files).</li>
  <li>A lack of concern for memory leakage, or performance generally (a major problem for a sound system like Concrete Mixer which is intended to run indefinitely on a Raspberry Pi).</li>
</ul>

<p>As mentioned before these drawbacks lead me to use a Perl wrapper to manage Concrete Mixer. This hasn’t been a massive inconvenience, but it would have been nice if Concrete Mixer could have been pure ChucK app.</p>

<h1 id="on-the-whole">On the whole</h1>

<p>My criticisms of ChucK are (in my view, obviously) reasonable, but I suspect if I had gone with any of the alternatives I could compile a list of different but equivalent drawbacks for them too, so singling out ChucK in this way is a little unfair. The fact is I’m still using ChucK and I’ve barely scratched the surface of its audio manipulation capabilities. I’m also unlikely to jump ship to another language any time soon. Although if you do know of something you think is better, let me know!</p>

  </section>
  
</article>



      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2017 Concrète Mixer. All rights reserved.</span>
</footer>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="/js/main.js?1497782518209214020"></script>


    </div>
  </body>
</html>