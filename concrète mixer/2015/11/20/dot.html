<!DOCTYPE html>
<html class="no-js">
  <head>
	<meta charset="utf-8">
	<title>
        
            Using dot to make charts
        
    </title>
	<meta name="description" content="As this is a software blog I may as well mention how I generated the charts in the last post. As background I’ve had experience in the past drawing flow char...">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-Frame-Options" content="sameorigin">

	<!-- CSS -->
	<link rel="stylesheet" href="/css/main.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

	<!-- Canonical -->
	<link rel="canonical" href="https://concrete-mixer.github.io/concr%C3%A8te%20mixer/2015/11/20/dot.html">

	<!-- RSS -->
	<link rel="alternate" type="application/atom+xml" title="Concrète Mixer - shredded field recording ambience" href="https://concrete-mixer.github.io/feed.xml" />

	<!-- Font Awesome -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google Fonts -->
	
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">
	

	<!-- KaTeX -->
	
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.js"></script>
	

	<!-- Google Analytics -->
	
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-70881154-1', 'auto');
	ga('send', 'pageview');
	</script>
	
</head>

  <body>
    <header class="site-header">
	<div class="branding">
		
		<a href="/">
			<img class="avatar" src="/img/highgate.jpg" alt=""/>
		</a>
		
		<h1 class="site-title">
			<a href="/">Concrète Mixer - shredded field recording ambience</a>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
			
			
			
			
			
			
			
			
			
			
			
			
			
			<!-- Social icons from Font Awesome, if enabled -->
			
<li>
	<a href="https://concrete-mixer.github.io/feed.xml" title="Follow RSS feed">
		<i class="fa fa-fw fa-rss"></i>
	</a>
</li>



<li>
	<a href="mailto:concretemixer.audio@gmail.com" title="Email">
		<i class="fa fa-fw fa-envelope"></i>
	</a>
</li>













<li>
	<a href="https://github.com/concrete-mixer" title="Follow on GitHub">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>













<li>
	<a href="https://soundcloud.com/concrete-mixer" title="Follow on SoundCloud">
		<i class="fa fa-fw fa-soundcloud"></i>
	</a>
</li>














		</ul>
	</nav>
</header>

    <div class="content">
      <article class="feature-image">
  <header style="background-image: url('/img/concrete-feature.jpg')">
    <h1 class="title">Using dot to make charts</h1>
    <p class="meta">
    November 20, 2015
    
    </p>
  </header>
  <section class="post-content"><p>As this is a software blog I may as well mention how I generated the charts in the last post. As background I’ve had experience in the past drawing flow charts in Visio and Fireworks (those were the days), and was looking for something similar. Being in Linux land I tried Inkscape and dia, but Inkscape was a bit bewildering and dia was a bit rubbish (sorry dia developers!). I knew vaguely of tools that could generate charts from text and tried flowchart.js, but found the whole business of rendering a chart by loading a web page a bit inelegant. In the end I found dot, part of the <a href="http://graphviz.org/">GraphViz package</a>.</p>

<h1 id="the-output-flow-diagram">The output flow diagram</h1>

<p>To refresh your memory, here’s the output file:</p>

<p><img src="/img/cm-schematic-sensible.svg" alt="Concrete Mixer flow diagram simplified" /></p>

<h1 id="the-markup">The markup</h1>

<p>And here’s the underlying ‘dot’ code used to generate the file (sorry the syntax highlighting is a bit rubbish, but the <a href="http://pygments.org/">pygments</a> lexer I found for this is a bit minimal):</p>

<figure class="highlight"><pre><code class="language-dot" data-lang="dot"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre></td><td class="code"><pre>digraph  {
    /* declare chartwide settings */
    penwidth=2.0;
    labeljust=left;
    node [fontname="Helvetica",penwidth="2.0",fontcolor=white,style=filled];
    edge [penwidth="2.0"];
    fontname=helvetica;
    fontsize=16;

    /* subgraphs allow you to group nodes */
    subgraph cluster_0 {
        node [fillcolor=chocolate,color=chocolate];
        graph [color=chocolate];
        label="Perl";
        fontcolor=chocolate;
        concretepm [label="Concrete.pm\nOSC server"];
        node [fillcolor=brown,color=brown];
    }

    subgraph cluster_1 {
        node [fillcolor=darkorchid,color=darkorchid];
        graph [color=darkorchid];
        label="WAV files";
        fontcolor=darkorchid;
        main [label="Main"];
        alt [label="Alt"];
    }

    subgraph cluster_2 {
        graph [color=forestgreen];
        fontcolor=forestgreen;
        label="ChucK";
        node [fillcolor=forestgreen,color=forestgreen];
        playsound [label="playSound.ck"];
        playfx [label="playFxChain.ck"];
    }

    /* the rest of the chart markup defines edges between nodes plus non subgraph nodes */
    node [fillcolor=hotpink,color=hotpink];
    shell [label="Linux shell $",color=hotpink];
    edge [color=hotpink];
    shell -&gt; concretepm;

    /* wav file flow */
    edge [color=darkorchid];
    main -&gt; concretepm;
    alt -&gt; concretepm;
    concretepm -&gt; playsound;

    /* play*-OSC server interactions */
    edge [color=chocolate];
    concretepm -&gt; playsound;
    concretepm -&gt; playfx;
    playfx -&gt; concretepm;
    playsound -&gt; concretepm;

    /* audio connections through to the dac */
    node [fillcolor=steelblue,color=steelblue];
    edge [color=steelblue];
    playsound -&gt; DAC;
    playsound -&gt; playfx;
    playfx -&gt; DAC;
}<span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>The bulk of the markup is colour declarations and changes, so while this looks like a lot of work, the subgroup and and node interrelationships can be defined in about half the number of lines.</p>

<h1 id="installation-and-invocation">Installation and invocation</h1>

<p>Installing graphviz in debian/ubuntu land requires the following:</p>

<p><code class="highlighter-rouge">$ sudo apt-get install graphviz</code></p>

<p>To generate an SVG all you have to run is:</p>

<p><code class="highlighter-rouge">$ dot -T svg -O cm-schematic-minimal.dot</code></p>

<p>…and an SVG file called cm-schematic-minimal.dot.svg is created.</p>

<h1 id="concludings">Concludings</h1>

<p>I’m not sure everyone will think writing 63 lines of code is better than spending 10 minutes with a graphical flowchart package to make the same chart. As a non-designer I likein the idea of marking up a text file and feeding it into a program so that it takes care of the layout, and it’s quite elegant (and portable) to have everything encapsulated in a single text file.</p>

<p>If you want to learn more about dot <a href="http://www.graphviz.org/pdf/dotguide.pdf">this excellent guide</a> will help you out.</p>
</section>
</article>

<!-- Post navigation -->


<!-- Disqus -->

<div class="comments">
  <div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_shortname = 'concretemixer';
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</div>


    </div>
    
<script src="/js/katex_init.js"></script>



<footer class="site-footer">
	<p class="text">Powered by <a href="http://jekyllrb.com">Jekyll</a> with <a href="https://rohanchandra.github.io/project/type/">Type Theme</a>
</p>
</footer>


  </body>
</html>
