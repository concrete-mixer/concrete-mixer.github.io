<!DOCTYPE html>
<html class="no-js">
  <head>
	<meta charset="utf-8">
	<title>Using dot to make charts | Concrète Mixer - messing around with audio code</title>
	<meta name="description" content="As this is a software blog I may as well mention how I generated the charts in the last post. As background I’ve had experience in the past drawing flow char...">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-Frame-Options" content="sameorigin">

	<!-- CSS -->
	<link rel="stylesheet" href="/css/main.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

	<!-- Canonical -->
	<link rel="canonical" href="https://concrete-mixer.github.io/concr%C3%A8te%20mixer/2015/11/20/dot.html">

	<!-- RSS -->
	<link rel="alternate" type="application/atom+xml" title="Concrète Mixer - messing around with audio code" href="https://concrete-mixer.github.io/feed.xml" />

	<!-- Font Awesome -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google Fonts -->
	
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">
	

	<!-- KaTeX -->
	
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.js"></script>
	

	<!-- Google Analytics -->
	
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-70881154-1', 'auto');
	ga('send', 'pageview');
	</script>
	
</head>

  <body>
    <header class="site-header">
	<div class="branding">
		
		<a href="/">
			<img class="avatar" src="/img/highgate.jpg" alt=""/>
		</a>
		
		<h1 class="site-title">
			<a href="/">Concrète Mixer - messing around with audio code</a>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
			
			
			
			
			
			
			
			
			
			<!-- Social icons from Font Awesome, if enabled -->
			
<li>
	<a href="https://concrete-mixer.github.io/feed.xml" title="Follow RSS feed">
		<i class="fa fa-fw fa-rss"></i>
	</a>
</li>



<li>
	<a href="mailto:concretemixer.audio@gmail.com" title="Email">
		<i class="fa fa-fw fa-envelope"></i>
	</a>
</li>













<li>
	<a href="https://github.com/concrete-mixer" title="Follow on GitHub">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>













<li>
	<a href="https://soundcloud.com/concrete-mixer" title="Follow on SoundCloud">
		<i class="fa fa-fw fa-soundcloud"></i>
	</a>
</li>














		</ul>
	</nav>
</header>

    <div class="content">
      <article class="feature-image">
  <header style="background-image: url('/img/concrete-feature.jpg')">
    <h1 class="title">Using dot to make charts</h1>
    <p class="meta">
    November 20, 2015
    
    </p>
  </header>
  <section class="post-content"><p>As this is a software blog I may as well mention how I generated the charts in the last post. As background I’ve had experience in the past drawing flow charts in Visio and Fireworks (those were the days), and was looking for something similar. Being in Linux land I tried Inkscape and dia, but Inkscape was a bit bewildering and dia was a bit rubbish (sorry dia developers!). I knew vaguely of tools that could generate charts from text and tried flowchart.js, but found the whole business of rendering a chart by loading a web page a bit inelegant. In the end I found dot, part of the <a href="http://graphviz.org/">GraphViz package</a>.</p>

<h1 id="the-output-flow-diagram">The output flow diagram</h1>

<p>To refresh your memory, here’s the output file:</p>

<p><img src="/img/cm-schematic-sensible.svg" alt="Concrete Mixer flow diagram simplified" /></p>

<h1 id="the-markup">The markup</h1>

<p>And here’s the underlying ‘dot’ code used to generate the file (sorry the syntax highlighting is a bit rubbish, but the <a href="http://pygments.org/">pygments</a> lexer I found for this is a bit minimal):</p>

<div class="highlight"><pre><code class="language-dot" data-lang="dot"><span class="lineno"> 1</span> <span class="k">digraph</span>  {
<span class="lineno"> 2</span>     <span class="c">/* declare chartwide settings */</span>
<span class="lineno"> 3</span>     <span class="na">penwidth</span>=2.0;
<span class="lineno"> 4</span>     <span class="na">label</span>just=left;
<span class="lineno"> 5</span>     <span class="k">node</span> [fontname=&quot;Helvetica&quot;,penwidth=&quot;2.0&quot;,fontcolor=white,style=filled];
<span class="lineno"> 6</span>     <span class="k">edge</span> [penwidth=&quot;2.0&quot;];
<span class="lineno"> 7</span>     <span class="na">fontname</span>=helvetica;
<span class="lineno"> 8</span>     <span class="na">fontsize</span>=16;
<span class="lineno"> 9</span> 
<span class="lineno">10</span>     <span class="c">/* subgraphs allow you to group nodes */</span>
<span class="lineno">11</span>     <span class="k">subgraph</span> cluster_0 {
<span class="lineno">12</span>         <span class="k">node</span> [fillcolor=chocolate,color=chocolate];
<span class="lineno">13</span>         <span class="k">graph</span> [color=chocolate];
<span class="lineno">14</span>         <span class="na">label</span>=&quot;Perl&quot;;
<span class="lineno">15</span>         <span class="na">fontcolor</span>=chocolate;
<span class="lineno">16</span>         concretepm [label=&quot;Concrete.pm\nOSC server&quot;];
<span class="lineno">17</span>         <span class="k">node</span> [fillcolor=brown,color=brown];
<span class="lineno">18</span>     }
<span class="lineno">19</span> 
<span class="lineno">20</span>     <span class="k">subgraph</span> cluster_1 {
<span class="lineno">21</span>         <span class="k">node</span> [fillcolor=darkorchid,color=darkorchid];
<span class="lineno">22</span>         <span class="k">graph</span> [color=darkorchid];
<span class="lineno">23</span>         <span class="na">label</span>=&quot;WAV files&quot;;
<span class="lineno">24</span>         <span class="na">fontcolor</span>=darkorchid;
<span class="lineno">25</span>         main [label=&quot;Main&quot;];
<span class="lineno">26</span>         alt [label=&quot;Alt&quot;];
<span class="lineno">27</span>     }
<span class="lineno">28</span> 
<span class="lineno">29</span>     <span class="k">subgraph</span> cluster_2 {
<span class="lineno">30</span>         <span class="k">graph</span> [color=forestgreen];
<span class="lineno">31</span>         <span class="na">fontcolor</span>=forestgreen;
<span class="lineno">32</span>         <span class="na">label</span>=&quot;ChucK&quot;;
<span class="lineno">33</span>         <span class="k">node</span> [fillcolor=forestgreen,color=forestgreen];
<span class="lineno">34</span>         playsound [label=&quot;playSound.ck&quot;];
<span class="lineno">35</span>         playfx [label=&quot;playFxChain.ck&quot;];
<span class="lineno">36</span>     }
<span class="lineno">37</span> 
<span class="lineno">38</span>     <span class="c">/* the rest of the chart markup defines edges between nodes plus non subgraph nodes */</span>
<span class="lineno">39</span>     <span class="k">node</span> [fillcolor=hotpink,color=hotpink];
<span class="lineno">40</span>     shell [label=&quot;Linux shell $&quot;,color=hotpink];
<span class="lineno">41</span>     <span class="k">edge</span> [color=hotpink];
<span class="lineno">42</span>     shell -&gt; concretepm;
<span class="lineno">43</span> 
<span class="lineno">44</span>     <span class="c">/* wav file flow */</span>
<span class="lineno">45</span>     <span class="k">edge</span> [color=darkorchid];
<span class="lineno">46</span>     main -&gt; concretepm;
<span class="lineno">47</span>     alt -&gt; concretepm;
<span class="lineno">48</span>     concretepm -&gt; playsound;
<span class="lineno">49</span> 
<span class="lineno">50</span>     <span class="c">/* play*-OSC server interactions */</span>
<span class="lineno">51</span>     <span class="k">edge</span> [color=chocolate];
<span class="lineno">52</span>     concretepm -&gt; playsound;
<span class="lineno">53</span>     concretepm -&gt; playfx;
<span class="lineno">54</span>     playfx -&gt; concretepm;
<span class="lineno">55</span>     playsound -&gt; concretepm;
<span class="lineno">56</span> 
<span class="lineno">57</span>     <span class="c">/* audio connections through to the dac */</span>
<span class="lineno">58</span>     <span class="k">node</span> [fillcolor=steelblue,color=steelblue];
<span class="lineno">59</span>     <span class="k">edge</span> [color=steelblue];
<span class="lineno">60</span>     playsound -&gt; DAC;
<span class="lineno">61</span>     playsound -&gt; playfx;
<span class="lineno">62</span>     playfx -&gt; DAC;
<span class="lineno">63</span> }</code></pre></div>

<p>The bulk of the markup is colour declarations and changes, so while this looks like a lot of work, the subgroup and and node interrelationships can be defined in about half the number of lines.</p>

<h1 id="installation-and-invocation">Installation and invocation</h1>

<p>Installing graphviz in debian/ubuntu land requires the following:</p>

<p><code>$ sudo apt-get install graphviz</code></p>

<p>To generate an SVG all you have to run is:</p>

<p><code>$ dot -T svg -O cm-schematic-minimal.dot</code></p>

<p>…and an SVG file called cm-schematic-minimal.dot.svg is created.</p>

<h1 id="concludings">Concludings</h1>

<p>I’m not sure everyone will think writing 63 lines of code is better than spending 10 minutes with a graphical flowchart package to make the same chart. As a non-designer I likein the idea of marking up a text file and feeding it into a program so that it takes care of the layout, and it’s quite elegant (and portable) to have everything encapsulated in a single text file.</p>

<p>If you want to learn more about dot <a href="http://www.graphviz.org/pdf/dotguide.pdf">this excellent guide</a> will help you out.</p>
</section>
</article>

<!-- Post navigation -->


<!-- Disqus -->

<div class="comments">
  <div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_shortname = 'concretemixer';
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</div>


    </div>
    
<script src="/js/katex_init.js"></script>



<footer class="site-footer">
	<p class="text">Powered by <a href="http://jekyllrb.com">Jekyll</a> with <a href="https://rohanchandra.github.io/project/type/">Type Theme</a>
</p>
</footer>


  </body>
</html>
